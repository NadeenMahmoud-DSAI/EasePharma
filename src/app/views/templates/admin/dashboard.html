{% extends "base.html" %}
{% block title %}Admin - EasePharma{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Pharmacist Dashboard</h2>
    <a href="{{ url_for('admin.add_product') }}" class="btn btn-add-cart">+ Add New Product</a>
</div>
<div class="card bg-light mb-4"><div class="card-body"><h4>Total Inventory: <strong>{{ total_products }}</strong> items | Low stock: <strong>{{ low_stock }}</strong></h4></div></div>

<h4>Products</h4>
<table class="table table-hover">
    <thead class="table-dark"><tr><th>ID</th><th>Name</th><th>Category</th><th>Price</th><th>Stock</th></tr></thead>
    <tbody>
        {% for product in products %}
        <tr {% if product.stock|int <=5 %} class="table-warning" {% endif %}>
            <td>{{ product.id }}</td>
            <td>{{ product.name }}</td>
            <td>{{ product.category }}</td>
            <td>${{ product.price }}</td>
            <td>{{ product.stock }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h4 class="mt-5">Recent Orders</h4>
<table class="table">
  <thead><tr><th>Order ID</th><th>User</th><th>Total</th><th>Status</th></tr></thead>
  <tbody>
    {% for o in orders %}
      <tr>
        <td>{{ o.order_id }}</td>
        <td>{{ o.user_id }}</td>
        <td>${{ "%.2f"|format(o.total_amount) }}</td>
        <td>{{ o.status }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
